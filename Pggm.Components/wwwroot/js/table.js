var lt=Object.defineProperty,Ut=Object.defineProperties,Vt=Object.getOwnPropertyDescriptor,_t=Object.getOwnPropertyDescriptors;var nt=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable;var at=l=>{throw TypeError(l)};var ot=(l,c,t)=>c in l?lt(l,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[c]=t,ct=(l,c)=>{for(var t in c||(c={}))Tt.call(c,t)&&ot(l,t,c[t]);if(nt)for(var t of nt(c))$t.call(c,t)&&ot(l,t,c[t]);return l},dt=(l,c)=>Ut(l,_t(c));var o=(l,c,t,e)=>{for(var i=e>1?void 0:e?Vt(c,t):c,n=l.length-1,d;n>=0;n--)(d=l[n])&&(i=(e?d(c,t,i):d(i))||i);return e&&i&&lt(c,t,i),i};var tt=(l,c,t)=>c.has(l)||at("Cannot "+t);var r=(l,c,t)=>(tt(l,c,"read from private field"),t?t.call(l):c.get(l)),u=(l,c,t)=>c.has(l)?at("Cannot add the same private member more than once"):c instanceof WeakSet?c.add(l):c.set(l,t),f=(l,c,t,e)=>(tt(l,c,"write to private field"),e?e.call(l,t):c.set(l,t),t),b=(l,c,t)=>(tt(l,c,"access private method"),t);var et=(l,c,t,e)=>({set _(i){f(l,c,i,t)},get _(){return r(l,c,e)}});var ht=`:host{display:block}.table-container{display:block;overflow-x:auto;position:relative}table{border-collapse:collapse;width:auto}tr>td:first-child{left:0;position:sticky}td[hidden]{display:none;visibility:hidden}::slotted(pggm-th),tbody td,th{padding:8px 8px 8px 0}::slotted(pggm-th),th{border-bottom:1px solid gray}tbody td{border-bottom:1px solid #d3d3d3}:host([selectable]) th:first-child{background:#fff;left:0;position:sticky;position:relative;z-index:1}::slotted(pggm-th:first-child){left:0;position:sticky}pggm-checkbox{left:0;position:absolute;scale:.7;vertical-align:middle}tr td:first-child{padding-left:1em}tr td:first-child:has(pggm-checkbox){padding-left:2em}tr td:last-child{padding-right:1em}pggm-th,td{background-color:#fff}:host([selectable][select-type=single]) tbody tr:focus-within{outline:none}:host([selectable][select-type=single]) tbody tr:focus-within td,:host([selectable][select-type=single]) tbody tr:hover td{background-color:#d3d3d3;background-color:var(--pggm-table-row-focus-background-color,#d3d3d3);color:#555;color:var(--pggm-table-row-focus-color,#555)}:host([selectable][select-type=single]) tbody tr.selected td,:host([selectable][select-type=single]) tbody tr.selected:focus-within td{background-color:var(--pggm-table-row-focus-background-color,var(--pggm-interaction-color));color:#fff;color:var(--pggm-table-row-focus-color,#fff)}tfoot *{display:block;max-width:100%;width:100%}
`;var ut=`:host{display:hidden}:host(:not([hidden])){background:#fff;display:table-cell;font-weight:700;padding:.5em}.table-header{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.table-header,.th-caption-container{display:-webkit-box;display:-ms-flexbox;display:flex}.th-caption-container{-webkit-box-align:left;-ms-flex-align:left;align-items:left}.th-caption,.th-caption-container{-webkit-box-flex:1;-ms-flex:1;flex:1}.th-caption{white-space:nowrap}.th-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border:none;cursor:pointer}.th-button svg{height:1em;width:1em}.th-filter-button{fill:none}.th-filter-button--active{fill:green;color:green}.table-header:has(pggm-checkbox){padding-left:2em}pggm-checkbox{left:0;position:absolute;scale:.7;vertical-align:middle}
`;var pt=l=>Maquette.h("svg",{key:l,class:"sortable",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),Maquette.h("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})),gt=l=>Maquette.h("svg",{key:l,class:"sortable-asc",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M4 6l7 0"}),Maquette.h("path",{d:"M4 12l7 0"}),Maquette.h("path",{d:"M4 18l9 0"}),Maquette.h("path",{d:"M15 9l3 -3l3 3"}),Maquette.h("path",{d:"M18 6l0 12"})),ft=l=>Maquette.h("svg",{key:l,class:"sortable-desc",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M4 6l9 0"}),Maquette.h("path",{d:"M4 12l7 0"}),Maquette.h("path",{d:"M4 18l7 0"}),Maquette.h("path",{d:"M15 15l3 3l3 -3"}),Maquette.h("path",{d:"M18 6l0 12"})),mt=l=>Maquette.h("svg",{key:l,viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z"}));var E,v,J,yt,bt,Et,vt,X,_,Lt,At,g=class extends CustomElement{constructor(){super(...arguments);u(this,v);u(this,E,null);this.width="auto";this.textAlign="left";this.field="";this.sortable=!1;this.filterable=!1;this.type="string";this.format="string";this.hidden=!1;u(this,X,()=>{requestAnimationFrame(()=>{this.checkbox.indeterminate||r(this,E).updateSelectAll(this.checkbox.checked)})});u(this,_,t=>{var i,n;let e=t.target.closest("button");e.matches(".th-sort-button")?(i=r(this,E))==null||i.sort(this):e.matches(".th-filter-button")&&((n=r(this,E))==null||n.openFilterPopover(this))})}updated(t,e,i){var n;t==="field"&&((n=r(this,E))==null||n.dispatchEvent(new CustomEvent("fieldChanged",{detail:{field:i},bubbles:!0,composed:!0})))}setFilter(t){var e;(e=r(this,E))==null||e.setFilter(this.field,t)}render(){return Maquette.h("div",{class:"table-header",styles:{width:r(this,v,Et)}},r(this,v,yt)&&r(this,v,bt)&&Maquette.h("pggm-checkbox",{onchange:r(this,X)}),Maquette.h("div",{class:"th-caption-container"},this.sortable&&Maquette.h("button",{"aria-label":`${r(this,v,Lt)} (${this.textContent.trim()})`,class:"th-button th-sort-button",onclick:r(this,_)},b(this,v,vt).call(this)),Maquette.h("div",{class:"th-caption",styles:{"text-align":this.textAlign}},Maquette.h("slot",null))),this.filterable&&Maquette.h("button",{"aria-pressed":r(this,v,J)?r(this,v,J).toString():"false","aria-label":`${r(this,v,At)} (${this.textContent.trim()})`,classes:{"th-button":!0,"th-filter-button":!0,"th-filter-button--active":r(this,v,J)},onclick:r(this,_)},mt("filterIcon")))}connectedCallback(){super.connectedCallback(),f(this,E,this.closest("pggm-table"))}disconnectedCallback(){super.disconnectedCallback(),f(this,E,null)}};E=new WeakMap,v=new WeakSet,J=function(){var t;return(t=r(this,E))==null?void 0:t.filters.has(this.field)},yt=function(){return r(this,E)?r(this,E).querySelector("pggm-th")===this:!1},bt=function(){var t;return(t=r(this,E).isMultipleSelect)!=null?t:!1},Et=function(){let t=parseFloat(this.width);return isNaN(t)?this.width:t+"px"},vt=function(){var e,i;if(!this.sortable)return null;if(((e=r(this,E))==null?void 0:e.currentSortField)===this.field){let n=(i=r(this,E))==null?void 0:i.currentSortDirection;if(n==="asc")return gt("sortable-asc");if(n==="desc")return ft("sortable-desc")}return pt("sortable")},X=new WeakMap,_=new WeakMap,Lt=function(){var t;return((t=r(this,E))==null?void 0:t.sortLabel)||s.LABEL_SORT},At=function(){var t;return((t=r(this,E))==null?void 0:t.filterLabel)||s.LABEL_FILTER},g.TAG_NAME="pggm-th",g.style=ut,o([Property({type:"string",attribute:"width",reflect:!0})],g.prototype,"width",2),o([Property({type:"string",attribute:"text-align"})],g.prototype,"textAlign",2),o([Property({type:"string",attribute:"field",reflect:!0})],g.prototype,"field",2),o([Property({type:"boolean",attribute:"sortable",reflect:!0})],g.prototype,"sortable",2),o([Property({type:"boolean",attribute:"filterable",reflect:!0})],g.prototype,"filterable",2),o([Property({type:"string",attribute:"type",reflect:!0})],g.prototype,"type",2),o([Property({type:"string",attribute:"format",reflect:!0})],g.prototype,"format",2),o([Property({type:"boolean",attribute:"hidden",reflect:!0})],g.prototype,"hidden",2),o([Query("pggm-checkbox")],g.prototype,"checkbox",2),g=o([CustomElementConfig({tagName:g.TAG_NAME})],g);var kt=`:host{display:block;margin:1em}nav{display:-webkit-box;display:-ms-flexbox;display:flex;margin:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1em;padding:.5em}nav span{width:auto}
`;var m,L,T,xt,x=class extends CustomElement{constructor(){super(...arguments);u(this,m);u(this,T,t=>{let i=t.target.closest("button");i.matches(".page-link--previous")?r(this,m,L).previousPage():i.matches(".page-link--next")&&r(this,m,L).nextPage(),this.scheduleRender()})}render(){return Maquette.h("nav",null,b(this,m,xt).call(this))}};m=new WeakSet,L=function(){return this.closest("pggm-table")},T=new WeakMap,xt=function(){return r(this,m,L)&&r(this,m,L).remote==="cursor"?Maquette.h("div",null,Maquette.h("button",{key:"cursor-previous-button",disabled:r(this,m,L).cursorData.prev?void 0:"disabled",class:"page-link page-link--previous",onclick:()=>r(this,m,L).remoteUrl=r(this,m,L).cursorData.prev,"aria-label":"Previous"},Maquette.h("span",{"aria-hidden":"true"},"\xAB")),Maquette.h("button",{key:"cursor-next-button",class:"page-link page-link--next",disabled:r(this,m,L).cursorData.next?void 0:"disabled",onclick:()=>r(this,m,L).remoteUrl=r(this,m,L).cursorData.next,"aria-label":"Next"},Maquette.h("span",{"aria-hidden":"true"},"\xBB"))):r(this,m,L)&&r(this,m,L).rowsPerPage&&r(this,m,L).totalPages>0?Maquette.h("nav",{"aria-label":x.LABEL_PAGING},Maquette.h("button",{key:"previous-button",disabled:r(this,m,L).currentPage===1?"disabled":!1,class:"page-link page-link--previous",onclick:r(this,T),"aria-label":"Previous"},Maquette.h("span",{"aria-hidden":"true"},"\xAB")),r(this,m,L).totalPages>1&&Maquette.h("span",null,r(this,m,L).currentPage,"/",r(this,m,L).totalPages),Maquette.h("button",{key:"next-button",class:"page-link page-link--next",onclick:r(this,T),"aria-label":"Next"},Maquette.h("span",{"aria-hidden":"true"},"\xBB"))):Maquette.h("div",null)},x.projectorMode="replace",x.TAG_NAME="pggm-table-paging",x.LABEL_PAGING="Paginering",x.style=kt,x=o([CustomElementConfig({tagName:x.TAG_NAME})],x);var St=`:host{display:none}:host([open]){display:block}.filter-popover[open]{background-color:var(--pggm-tooltip-background-color);border:0;border-radius:var(--pggm-tooltip-border-radius);-webkit-box-shadow:var(--pggm-tooltip-box-shadow);box-shadow:var(--pggm-tooltip-box-shadow);color:var(--pggm-tooltip-color);left:var(--_table-filter-left);margin:0;overflow-x:hidden;padding:var(--pggm-tooltip-padding-block-start) var(--pggm-tooltip-padding-inline-start) var(--pggm-tooltip-padding-block-end) var(--pggm-tooltip-padding-inline-end);top:var(--_table-filter-top)}.filter-popover-actions{gap:1em;gap:var(--pggm-data-table-filter-popover-gap,1em);margin-top:1em;margin-top:var(--pggm-data-table-filter-popover-actions-block-start,1em)}.filter-form,.filter-popover-actions{display:-webkit-box;display:-ms-flexbox;display:flex}.filter-form{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:.5em;gap:var(--pggm-data-table-filter-popover-gap,.5em)}.hidden{display:none}
`;var S,p,y,Y,D,wt,W,$,k,j,Z,M,A=class extends CustomElement{constructor(){super(...arguments);u(this,y);u(this,S,null);u(this,p,null);this.fieldType="string";u(this,D,!1);u(this,W,()=>{r(this,S).setFilter(r(this,p)),this.hide()});u(this,$,()=>{r(this,S).setFilter(null),this.hide()});u(this,j,t=>{t.key==="Enter"?r(this,W).call(this):t.key==="Escape"&&this.hide()});u(this,Z,()=>{var t,e,i,n,d,h;return Maquette.h("div",{class:"filter-form filter-form-number",key:"number-popover"},Maquette.h("div",null,Maquette.h("select",{is:"pggm-select",onchange:F=>{r(this,p).type=F.target.value}},Maquette.h("option",{selected:r(this,p).type==="equals",value:"equals"},((t=r(this,y,k))==null?void 0:t.equalsLabel)||s.LABEL_EQUALS),Maquette.h("option",{selected:r(this,p).type==="greaterThan",value:"greaterThan"},((e=r(this,y,k))==null?void 0:e.greaterThanLabel)||s.LABEL_GREATER_THAN),Maquette.h("option",{selected:r(this,p).type==="greaterThanOrEqual",value:"greaterThanOrEqual"},((i=r(this,y,k))==null?void 0:i.greaterTanOrEqualsLabel)||s.LABEL_GREATER_THAN_OR_EQUAL),Maquette.h("option",{selected:r(this,p).type==="lessThan",value:"lessThan"},((n=r(this,y,k))==null?void 0:n.lessThanLabel)||s.LABEL_LESS_THAN),Maquette.h("option",{selected:r(this,p).type==="lessThanOrEqual",value:"lessThanOrEqual"},((d=r(this,y,k))==null?void 0:d.lessThanOrEqualsLabel)||s.LABEL_LESS_THAN_OR_EQUAL),Maquette.h("option",{selected:r(this,p).type==="between",value:"between"},((h=r(this,y,k))==null?void 0:h.betweenLabel)||s.LABEL_BETWEEN))),Maquette.h("div",null,Maquette.h("input",{key:"number-field",step:"any",type:"number",is:"pggm-input","aria-label":this.filterLabel,onchange:F=>{r(this,p).values[0]=F.target.value}})),Maquette.h("div",{classes:{hidden:r(this,p).type!=="between"}},Maquette.h("input",{key:"second-number-field",step:"any",type:"number",is:"pggm-input","aria-label":this.filterLabel,onchange:F=>{r(this,p).values[1]=F.target.value}})),Maquette.h("div",{class:"filter-popover-actions"},Maquette.h("button",{type:"button",is:"pggm-button",appearance:"primary",onclick:r(this,W)},this.filterLabel),Maquette.h("button",{type:"button",is:"pggm-button",appearance:"secondary",onclick:r(this,$)},this.clearLabel)))});u(this,M,()=>{var t,e,i,n,d;return Maquette.h("div",{class:"filter-form filter-form-string",key:"string-popover"},Maquette.h("select",{is:"pggm-select",onchange:h=>{r(this,p).type=h.target.value}},Maquette.h("option",{selected:r(this,p).type==="contains",value:"contains"},((t=r(this,y,k))==null?void 0:t.containsLabel)||s.LABEL_CONTAINS),Maquette.h("option",{selected:r(this,p).type==="equals",value:"equals"},((e=r(this,y,k))==null?void 0:e.equalsLabel)||s.LABEL_EQUALS),Maquette.h("option",{selected:r(this,p).type==="startsWith",value:"startsWith"},((i=r(this,y,k))==null?void 0:i.startsWithLabel)||s.LABEL_STARTS_WITH),Maquette.h("option",{selected:r(this,p).type==="endsWith",value:"endsWith"},((n=r(this,y,k))==null?void 0:n.endsWithLabel)||s.LABEL_ENDS_WITH)),Maquette.h("input",{type:"text",is:"pggm-input",id:"StringFilter","aria-label":this.filterLabel,onchange:h=>{r(this,p).value=h.target.value}}),Maquette.h("pggm-checkbox",{id:"caseSensitive",onchange:h=>{r(this,p).caseSensitive=h.target.checked}},((d=r(this,y,k))==null?void 0:d.caseSensitiveLabel)||s.LABEL_CASE_SENSITIVE),Maquette.h("div",{class:"filter-popover-actions"},Maquette.h("button",{type:"button",is:"pggm-button",appearance:"primary",onclick:r(this,W)},this.filterLabel),Maquette.h("button",{type:"button",is:"pggm-button",appearance:"secondary",onclick:r(this,$)},this.clearLabel)))})}show(t,e){if(r(this,y,Y)){this.hide();return}f(this,p,e),this.fieldType=t.type||"string",f(this,S,t),this.fieldType==="number"&&!r(this,p)?f(this,p,{name:"numberFilter",type:"equals",values:["",""]}):r(this,p)||f(this,p,{name:"stringFilter",type:"contains",value:"",caseSensitive:!1}),this.setAttribute("open",""),this.scheduleRender()}hide(){f(this,D,!1),this.style.opacity="0",this.removeAttribute("open"),f(this,S,null)}get filterLabel(){var t;return((t=r(this,y,k))==null?void 0:t.filterLabel)||s.LABEL_FILTER}get clearLabel(){var t;return((t=r(this,y,k))==null?void 0:t.clearLabel)||A.LABEL_CLEAR}render(){return Maquette.h("div",{class:"filter-popover",popover:"",open:r(this,y,Y),on:{toggle:t=>{t.newState==="closed"&&this.hide()}},afterUpdate:t=>{var e;r(this,y,Y)&&(this.style.opacity="0",t.showPopover(),requestAnimationFrame(()=>{b(this,y,wt).call(this,t)}),(e=this.inputElement)==null||e.focus())}},this.fieldType==="string"&&r(this,M).call(this),this.fieldType==="number"&&r(this,Z).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",r(this,j))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",r(this,j))}};S=new WeakMap,p=new WeakMap,y=new WeakSet,Y=function(){return this.hasAttribute("open")},D=new WeakMap,wt=function(t){if(r(this,D)||!t||!r(this,S))return;let e=r(this,S).getBoundingClientRect(),i=e.left+e.width-t.clientWidth;i<0&&(i=0),this.style.setProperty("--_table-filter-left",`${i}px`),this.style.setProperty("--_table-filter-top",`${e.top+r(this,S).offsetHeight}px`),this.style.opacity=null,this.inputElement&&this.fieldType==="string"?this.inputElement.value=r(this,p).value||"":this.fieldType==="number"&&Array.from(this.shadowRoot.querySelectorAll("input[type='number']")).forEach((d,h)=>{d.value=r(this,p).values[h]||""}),f(this,D,!0)},W=new WeakMap,$=new WeakMap,k=function(){var t;return((t=r(this,S))==null?void 0:t.closest(s.TAG_NAME))||null},j=new WeakMap,Z=new WeakMap,M=new WeakMap,A.TAG_NAME="pggm-table-filter",A.LABEL_CLEAR="Wis",A.style=St,o([Query("div.filter-popover")],A.prototype,"popoverElement",2),o([Query("input#StringFilter")],A.prototype,"inputElement",2),o([Property({type:"string"})],A.prototype,"fieldType",2),A=o([CustomElementConfig({tagName:A.TAG_NAME})],A);var B,z,K,U,a,Nt,Ct,I,Q,w,R,N,O,Ft,Rt,Bt,Ht,qt,It,Dt,Wt,G,P,rt,s=class extends CustomElement{constructor(){super();u(this,a);u(this,B);u(this,z);u(this,K,null);u(this,U);this.filters=new Map;u(this,I,[]);this.selected=[];this.remote=null;this.remoteUrl=null;this.data=[];this.selectable=!1;this.selectType="multiple";this.actions=!1;this.sortLabel=s.LABEL_SORT;this.clearLabel=s.LABEL_CLEAR;this.filterLabel=s.LABEL_FILTER;this.greaterThanLabel=s.LABEL_GREATER_THAN;this.greaterTanOrEqualsLabel=s.LABEL_GREATER_THAN_OR_EQUAL;this.lessThanLabel=s.LABEL_LESS_THAN;this.lessThanOrEqualsLabel=s.LABEL_LESS_THAN_OR_EQUAL;this.betweenLabel=s.LABEL_BETWEEN;this.equalsLabel=s.LABEL_EQUALS;this.containsLabel=s.LABEL_CONTAINS;this.endsWithLabel=s.LABEL_ENDS_WITH;this.startsWithLabel=s.LABEL_STARTS_WITH;this.caseSensitiveLabel=s.LABEL_CASE_SENSITIVE;u(this,w,1);u(this,R);u(this,N,"asc");u(this,G,t=>{t.preventDefault();let i=t.target.closest("tr").dataset.id;this.selected&&this.selected.includes(i)?this.selected=this.selected.filter(n=>n!==i):(this.selected=this.selected||[],this.selected.push(i))});b(this,a,Nt).call(this),f(this,K,Maquette.dom.create(Maquette.h("slot",{name:"footer"})).domNode)}get cursorData(){if(!r(this,U))return{prev:void 0,next:void 0};let{prev:t,next:e}=r(this,U);return{prev:t,next:e}}getFormatter(t){if(!s.formatters.has(t)){if(t&&t.indexOf("-")>-1&&r(this,I).indexOf(t)===-1){let e=customElements.get(t);if(e)return s.formatters.set(t,(i,n)=>e.format(i,n)),s.formatters.get(t);r(this,I).push(t),customElements.whenDefined(t).then(()=>{let i=customElements.get(t);i&&(s.formatters.set(t,(n,d)=>i.format(n,d)),f(this,I,r(this,I).filter(n=>n!==t)),this.scheduleRender())})}return(e,i)=>i[e]}return s.formatters.get(t)||((e,i)=>i[e])}get fields(){return r(this,a,Q).map(t=>t.field)}get currentSortField(){return r(this,R)}get currentSortDirection(){return r(this,N)}get currentPage(){return r(this,w)}nextPage(){r(this,w)<this.totalPages&&(et(this,w)._++,this.scheduleRender())}previousPage(){r(this,w)>1&&(et(this,w)._--,this.scheduleRender())}get totalPages(){if(!this.data||this.data.length===0)return 0;let t=this.data.length,e=Math.ceil(t/this.rowsPerPage);return e>0?e:1}sort(t){if(r(this,R)===t.field?f(this,N,r(this,N)==="asc"?"desc":"asc"):f(this,N,"asc"),f(this,w,1),f(this,R,t.field),r(this,B)==="cursor"){let e=new URL(this.remoteUrl,window.location.href);e.searchParams.set("sort",t.field),e.searchParams.set("order",r(this,N)),e.searchParams.delete("cursor"),this.remoteUrl=e.toString();return}this.scheduleRender()}openFilterPopover(t){let e=this.getRootNode();if(e instanceof ShadowRoot||e instanceof Document){let i=e.querySelector("pggm-table-filter");i||(i=document.createElement(A.TAG_NAME),e instanceof Document?e.body.appendChild(i):e.appendChild(i)),i.show(t,this.filters.get(t.field))}}setFilter(t,e){var n;e?this.filters.set(t,e):this.filters.delete(t),this.scheduleRender(),((n=this.slotElement)==null?void 0:n.assignedElements().filter(d=>d instanceof g)).forEach(d=>{d instanceof g&&d.scheduleRender()})}updateSelectAll(t){t?this.selected=Array.from(this.shadowRoot.querySelectorAll("tbody tr")).map(e=>e.dataset.id):this.selected=[],b(this,a,P).call(this)}get isMultipleSelect(){return this.selectable&&this.selectType==="multiple"}render(){let t=this.querySelectorAll(g.TAG_NAME);return Maquette.h("div",{class:"table-container"},Maquette.h("table",null,Maquette.h("thead",null,Maquette.h("tr",null,Maquette.h("slot",{id:"MainSlot",afterCreate:e=>{e.addEventListener("slotchange",()=>{this.scheduleRender()}),this.scheduleRender()}}))),Maquette.h("tbody",null,r(this,a,Rt).map((e,i)=>{let n=e["."],d={};return this.selectable&&!this.isMultipleSelect&&(d.tabindex="0",d.onclick=h=>{this.selected=[n],b(this,a,P).call(this)},d.onkeydown=h=>{(h.key==="Enter"||h.key===" ")&&(this.selected=[n],b(this,a,P).call(this),h.preventDefault())}),Maquette.h("tr",dt(ct({},d),{key:`tr-${i}-${n}`,"data-id":n?n.toString():"",classes:{even:i%2===0,odd:i%2!==0,selected:this.selected.includes(n)}}),Array.from(t).map((h,F)=>{var it;let C=h.getAttribute("field"),H=h.getAttribute("format"),q=C?e[C]:null;if(q)if(H&&H.indexOf("-")>-1&&this.idField){let st=this.data.find(Ot=>Ot[this.idField]===n);q=this.getFormatter(H)(C,st||e)}else q=this.getFormatter(H)(C,e);let V=n||e[h.field];return Maquette.h("td",{key:`td-${C}-${i}-${r(this,w)}-${r(this,N)}`,styles:{"text-align":b(this,a,Wt).call(this,C)},hidden:h.hidden},this.isMultipleSelect&&F===0?Maquette.h("label",{for:`Checkbox-${V}`,onclick:r(this,G)},Maquette.h("pggm-checkbox",{id:`Checkbox-${V}`,class:"select-row",type:"checkbox",checked:(it=this.selected)==null?void 0:it.includes(V+""),name:V+"","data-field-id":V+""}),b(this,a,rt).call(this,q)):b(this,a,rt).call(this,q))}))}))))}updated(t,e,i){(t==="remote"||t==="remoteUrl")&&b(this,a,Ct).call(this)}connectedCallback(){var t;super.connectedCallback(),(t=this.shadowRoot)!=null&&t.querySelector("slot[name=footer]")||this.shadowRoot.appendChild(r(this,K)),this.addEventListener("fieldChanged",e=>{this.scheduleRender()})}};B=new WeakMap,z=new WeakMap,K=new WeakMap,U=new WeakMap,a=new WeakSet,Nt=function(){s.formatters.set("date",(t,e)=>{let i=e[t];return i instanceof Date?i.toLocaleDateString(r(this,a,O)):i}),s.formatters.set("datetime",(t,e)=>{let i=e[t];return i instanceof Date?`${i.toLocaleDateString(r(this,a,O))} ${i.toLocaleTimeString(r(this,a,O))}`:i}),s.formatters.set("number",(t,e)=>{let i=e[t];return typeof i=="number"?new Intl.NumberFormat(r(this,a,O)).format(i):i}),s.formatters.set("currency",(t,e)=>{let i=e[t];return typeof i=="number"?new Intl.NumberFormat(r(this,a,O),{style:"currency",currency:"EUR"}).format(i):i}),s.formatters.set("string",(t,e)=>{let i=e[t];return typeof i=="string"?i:i.toString()})},Ct=function(){requestAnimationFrame(()=>{let t=!1;r(this,B)!==this.remote&&f(this,B,this.remote),r(this,z)!==this.remoteUrl&&(f(this,z,this.remoteUrl),t=!0),this.remote&&this.remoteUrl&&t&&fetch(this.remoteUrl).then(e=>e.json()).then(e=>{f(this,U,e),r(this,B)==="cursor"?this.data=e.items:r(this,B)==="simple"&&(this.data=e)}).catch(e=>{console.error("Error fetching remote data:",e)}).finally(()=>{var e;(e=this.querySelector("pggm-table-paging"))==null||e.scheduleRender(),this.scheduleRender()})})},I=new WeakMap,Q=function(){var e;let t=(e=this.slotElement)==null?void 0:e.assignedElements();return t?t.filter(i=>i instanceof g).map(i=>({field:i.field,format:i.format,type:i.type,hidden:i.hidden})):[]},w=new WeakMap,R=new WeakMap,N=new WeakMap,O=function(){var t;return this.getAttribute("lang")||((t=this.closest("[lang]"))==null?void 0:t.getAttribute("lang"))||document.documentElement.lang||"nl"},Ft=function(t){t.forEach(e=>{r(this,a,Q).forEach(i=>{let n=e[i.field];i.type==="date"&&n&&typeof n=="string"&&(e[i.field]=new Date(n))})})},Rt=function(){if(!this.data)return[];let t=this.data.map(n=>{let d={};return r(this,a,Q).forEach(h=>{let C=h.field.split(".").reduce((H,q)=>H?H[q]:void 0,n);d[h.field]=C}),this.idField&&(d["."]=n[this.idField]),d});b(this,a,Ft).call(this,t);let e=b(this,a,Ht).call(this,t),i=b(this,a,Dt).call(this,e);return b(this,a,Bt).call(this,i)},Bt=function(t){if(!t)return[];if(this.rowsPerPage<=0||this.rowsPerPage===void 0)return t;let e=(r(this,w)-1)*this.rowsPerPage,i=e+this.rowsPerPage;return t.slice(e,i)},Ht=function(t){let e=t||[];return this.filters.forEach((i,n)=>{e=e.filter(d=>{let h=d[n],F=r(this,a,Q).find(C=>C.field===n).type;return!i||!h?!0:i.name==="stringFilter"?b(this,a,qt).call(this,i,h):i.name==="numberFilter"?b(this,a,It).call(this,i,h):!0})}),e},qt=function(t,e){if(typeof e!="string")return!1;if(t.caseSensitive){let i=t.value;switch(t.type){case"contains":return e.includes(i);case"startsWith":return e.startsWith(i);case"endsWith":return e.endsWith(i);case"equals":return e===i;default:return!0}}else{let i=t.value.toLowerCase();switch(t.type){case"contains":return e.toLowerCase().includes(i);case"startsWith":return e.toLowerCase().startsWith(i);case"endsWith":return e.toLowerCase().endsWith(i);case"equals":return e.toLowerCase()==i;default:return!0}}},It=function(t,e){if(typeof e!="number")return!1;let i=t.values?t.values[0]:null,n=i!==null?parseFloat(i):null;if(isNaN(n))return!0;switch(t.type){case"greaterThan":return e>n;case"greaterThanOrEqual":return e>=n;case"lessThan":return e<n;case"lessThanOrEqual":return e<=n;case"between":if(!t.values||t.values.length!==2)return!0;let d=t.values?t.values[1]:null,h=d!==null?parseFloat(d):null;return isNaN(h)?!0:e>=n&&e<=h;case"equals":return e===n;default:return!0}},Dt=function(t){if(!t)return[];if(!r(this,R))return t;let e=[...t];return e.sort((i,n)=>{let d=i[r(this,R)],h=n[r(this,R)];return d<h?r(this,N)==="asc"?-1:1:d>h?r(this,N)==="asc"?1:-1:0}),e},Wt=function(t){var n;let e=(n=this.slotElement)==null?void 0:n.assignedElements();if(!e)return"left";let i=e.find(d=>d instanceof g&&d.field===t);return i instanceof g?i.textAlign:"left"},G=new WeakMap,P=function(){requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("selectionChange",{detail:{selectedRows:this.selected},bubbles:!0,composed:!0}))})},rt=function(t){return t instanceof HTMLElement?Maquette.h("div",{afterCreate:e=>{e.firstChild&&e.removeChild(e.firstChild),e.appendChild(t)}}):t},s.projectorMode="replace",s.TAG_NAME="pggm-table",s.LABEL_FILTER="Filter",s.LABEL_SORT="Sorteren",s.LABEL_GREATER_THAN="Groter dan",s.LABEL_LESS_THAN="Kleiner dan",s.LABEL_BETWEEN="Tussen",s.LABEL_EQUALS="Gelijk aan",s.LABEL_CONTAINS="Bevat",s.LABEL_ENDS_WITH="Eindigt op",s.LABEL_STARTS_WITH="Begint met",s.LABEL_LESS_THAN_OR_EQUAL="Kleiner dan of gelijk aan",s.LABEL_GREATER_THAN_OR_EQUAL="Groter dan of gelijk aan",s.LABEL_CLEAR="Wissen",s.LABEL_CASE_SENSITIVE="Hoofdlettergevoelig",s.style=ht,s.formatters=new Map,o([Query("#MainSlot")],s.prototype,"slotElement",2),o([Property({type:"object"})],s.prototype,"selected",2),o([Property({type:"string",attribute:"remote",reflect:!0})],s.prototype,"remote",2),o([Property({type:"string",attribute:"remote-url"})],s.prototype,"remoteUrl",2),o([Property({type:"object",attribute:"data"})],s.prototype,"data",2),o([Property({type:"boolean",attribute:"selectable"})],s.prototype,"selectable",2),o([Property({type:"string",attribute:"select-type"})],s.prototype,"selectType",2),o([Property({type:"boolean",attribute:"actions"})],s.prototype,"actions",2),o([Property({type:"string",attribute:"sort-label"})],s.prototype,"sortLabel",2),o([Property({type:"string",attribute:"clear-label"})],s.prototype,"clearLabel",2),o([Property({type:"string",attribute:"filter-label"})],s.prototype,"filterLabel",2),o([Property({type:"string",attribute:"greater-then-label"})],s.prototype,"greaterThanLabel",2),o([Property({type:"string",attribute:"greater-than-or-equals-label"})],s.prototype,"greaterTanOrEqualsLabel",2),o([Property({type:"string",attribute:"less-then-label"})],s.prototype,"lessThanLabel",2),o([Property({type:"string",attribute:"less-than-or-equals-label"})],s.prototype,"lessThanOrEqualsLabel",2),o([Property({type:"string",attribute:"between-label"})],s.prototype,"betweenLabel",2),o([Property({type:"string",attribute:"equals-label"})],s.prototype,"equalsLabel",2),o([Property({type:"string",attribute:"contains-label"})],s.prototype,"containsLabel",2),o([Property({type:"string",attribute:"ends-withh-label"})],s.prototype,"endsWithLabel",2),o([Property({type:"string",attribute:"starts-with-label"})],s.prototype,"startsWithLabel",2),o([Property({type:"boolean",attribute:"case-sensitive-label"})],s.prototype,"caseSensitiveLabel",2),o([Property({type:"number",attribute:"rows-per-page"})],s.prototype,"rowsPerPage",2),o([Property({type:"string",attribute:"id-field"})],s.prototype,"idField",2),s=o([CustomElementConfig({tagName:s.TAG_NAME})],s);export{s as PGGMTable};
