var ot=Object.defineProperty,Ut=Object.defineProperties,Vt=Object.getOwnPropertyDescriptor,_t=Object.getOwnPropertyDescriptors;var st=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable;var lt=l=>{throw TypeError(l)};var nt=(l,a,t)=>a in l?ot(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,at=(l,a)=>{for(var t in a||(a={}))Tt.call(a,t)&&nt(l,t,a[t]);if(st)for(var t of st(a))$t.call(a,t)&&nt(l,t,a[t]);return l},ct=(l,a)=>Ut(l,_t(a));var o=(l,a,t,r)=>{for(var i=r>1?void 0:r?Vt(a,t):a,n=l.length-1,d;n>=0;n--)(d=l[n])&&(i=(r?d(a,t,i):d(i))||i);return r&&i&&ot(a,t,i),i};var tt=(l,a,t)=>a.has(l)||lt("Cannot "+t);var e=(l,a,t)=>(tt(l,a,"read from private field"),t?t.call(l):a.get(l)),u=(l,a,t)=>a.has(l)?lt("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(l):a.set(l,t),f=(l,a,t,r)=>(tt(l,a,"write to private field"),r?r.call(l,t):a.set(l,t),t),b=(l,a,t)=>(tt(l,a,"access private method"),t);var et=(l,a,t,r)=>({set _(i){f(l,a,i,t)},get _(){return e(l,a,r)}});var dt=`:host{display:block}.table-container{display:block;overflow-x:auto;position:relative}table{border-collapse:collapse;width:auto}tr>td:first-child{left:0;position:sticky}td[hidden]{display:none;visibility:hidden}::slotted(pggm-th),tbody td,th{padding:8px 8px 8px 0}::slotted(pggm-th),th{border-bottom:1px solid gray}tbody td{border-bottom:1px solid #d3d3d3}:host([selectable]) th:first-child{background:#fff;left:0;position:sticky;position:relative;z-index:1}::slotted(pggm-th:first-child){left:0;position:sticky}pggm-checkbox{left:0;position:absolute;scale:.7;vertical-align:middle}tr td:first-child{padding-left:1em}tr td:first-child:has(pggm-checkbox){padding-left:2em}tr td:last-child{padding-right:1em}pggm-th,td{background-color:#fff}:host([selectable][select-type=single]) tbody tr:focus-within{outline:none}:host([selectable][select-type=single]) tbody tr:focus-within td,:host([selectable][select-type=single]) tbody tr:hover td{background-color:#d3d3d3;background-color:var(--pggm-table-row-focus-background-color,#d3d3d3);color:#555;color:var(--pggm-table-row-focus-color,#555)}:host([selectable][select-type=single]) tbody tr.selected td,:host([selectable][select-type=single]) tbody tr.selected:focus-within td{background-color:var(--pggm-table-row-focus-background-color,var(--pggm-interaction-color));color:#fff;color:var(--pggm-table-row-focus-color,#fff)}tfoot *{display:block;max-width:100%;width:100%}
`;var ht=`:host{display:hidden}:host(:not([hidden])){background:#fff;display:table-cell;font-weight:700;padding:.5em}.table-header{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.table-header,.th-caption-container{display:-webkit-box;display:-ms-flexbox;display:flex}.th-caption-container{-webkit-box-align:left;-ms-flex-align:left;align-items:left}.th-caption,.th-caption-container{-webkit-box-flex:1;-ms-flex:1;flex:1}.th-caption{white-space:nowrap}.th-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border:none;cursor:pointer}.th-button svg{height:1em;width:1em}.th-filter-button{fill:none}.th-filter-button--active{fill:green;color:green}.table-header:has(pggm-checkbox){padding-left:2em}pggm-checkbox{left:0;position:absolute;scale:.7;vertical-align:middle}
`;var ut=l=>Maquette.h("svg",{key:l,class:"sortable",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),Maquette.h("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})),pt=l=>Maquette.h("svg",{key:l,class:"sortable-asc",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M4 6l7 0"}),Maquette.h("path",{d:"M4 12l7 0"}),Maquette.h("path",{d:"M4 18l9 0"}),Maquette.h("path",{d:"M15 9l3 -3l3 3"}),Maquette.h("path",{d:"M18 6l0 12"})),gt=l=>Maquette.h("svg",{key:l,class:"sortable-desc",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M4 6l9 0"}),Maquette.h("path",{d:"M4 12l7 0"}),Maquette.h("path",{d:"M4 18l7 0"}),Maquette.h("path",{d:"M15 15l3 3l3 -3"}),Maquette.h("path",{d:"M18 6l0 12"})),ft=l=>Maquette.h("svg",{key:l,viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Maquette.h("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Maquette.h("path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z"}));var E,v,J,mt,yt,bt,Et,X,_,vt,Lt,g=class extends CustomElement{constructor(){super(...arguments);u(this,v);u(this,E,null);this.width="auto";this.textAlign="left";this.field="";this.sortable=!1;this.filterable=!1;this.type="string";this.format="string";this.hidden=!1;u(this,X,()=>{requestAnimationFrame(()=>{this.checkbox.indeterminate||e(this,E).updateSelectAll(this.checkbox.checked)})});u(this,_,t=>{var i,n;let r=t.target.closest("button");r.matches(".th-sort-button")?(i=e(this,E))==null||i.sort(this):r.matches(".th-filter-button")&&((n=e(this,E))==null||n.openFilterPopover(this))})}updated(t,r,i){var n;t==="field"&&((n=e(this,E))==null||n.dispatchEvent(new CustomEvent("fieldChanged",{detail:{field:i},bubbles:!0,composed:!0})))}setFilter(t){var r;(r=e(this,E))==null||r.setFilter(this.field,t)}render(){return Maquette.h("div",{class:"table-header",styles:{width:e(this,v,bt)}},e(this,v,mt)&&e(this,v,yt)&&Maquette.h("pggm-checkbox",{onchange:e(this,X)}),Maquette.h("div",{class:"th-caption-container"},this.sortable&&Maquette.h("button",{"aria-label":`${e(this,v,vt)} (${this.textContent.trim()})`,class:"th-button th-sort-button",onclick:e(this,_)},b(this,v,Et).call(this)),Maquette.h("div",{class:"th-caption",styles:{"text-align":this.textAlign}},Maquette.h("slot",null))),this.filterable&&Maquette.h("button",{"aria-pressed":e(this,v,J)?e(this,v,J).toString():"false","aria-label":`${e(this,v,Lt)} (${this.textContent.trim()})`,classes:{"th-button":!0,"th-filter-button":!0,"th-filter-button--active":e(this,v,J)},onclick:e(this,_)},ft("filterIcon")))}connectedCallback(){super.connectedCallback(),f(this,E,this.closest("pggm-table"))}disconnectedCallback(){super.disconnectedCallback(),f(this,E,null)}};E=new WeakMap,v=new WeakSet,J=function(){var t;return(t=e(this,E))==null?void 0:t.filters.has(this.field)},mt=function(){return e(this,E)?e(this,E).querySelector("pggm-th")===this:!1},yt=function(){var t;return(t=e(this,E).isMultipleSelect)!=null?t:!1},bt=function(){let t=parseFloat(this.width);return isNaN(t)?this.width:t+"px"},Et=function(){var r,i;if(!this.sortable)return null;if(((r=e(this,E))==null?void 0:r.currentSortField)===this.field){let n=(i=e(this,E))==null?void 0:i.currentSortDirection;if(n==="asc")return pt("sortable-asc");if(n==="desc")return gt("sortable-desc")}return ut("sortable")},X=new WeakMap,_=new WeakMap,vt=function(){var t;return((t=e(this,E))==null?void 0:t.sortLabel)||s.LABEL_SORT},Lt=function(){var t;return((t=e(this,E))==null?void 0:t.filterLabel)||s.LABEL_FILTER},g.TAG_NAME="pggm-th",g.style=ht,o([Property({type:"string",attribute:"width",reflect:!0})],g.prototype,"width",2),o([Property({type:"string",attribute:"text-align"})],g.prototype,"textAlign",2),o([Property({type:"string",attribute:"field",reflect:!0})],g.prototype,"field",2),o([Property({type:"boolean",attribute:"sortable",reflect:!0})],g.prototype,"sortable",2),o([Property({type:"boolean",attribute:"filterable",reflect:!0})],g.prototype,"filterable",2),o([Property({type:"string",attribute:"type",reflect:!0})],g.prototype,"type",2),o([Property({type:"string",attribute:"format",reflect:!0})],g.prototype,"format",2),o([Property({type:"boolean",attribute:"hidden",reflect:!0})],g.prototype,"hidden",2),o([Query("pggm-checkbox")],g.prototype,"checkbox",2),g=o([CustomElementConfig({tagName:g.TAG_NAME})],g);var At=`:host{display:block;margin:1em}nav{display:-webkit-box;display:-ms-flexbox;display:flex;margin:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1em;padding:.5em}nav span{width:auto}
`;var m,L,T,kt,x=class extends CustomElement{constructor(){super(...arguments);u(this,m);u(this,T,t=>{let i=t.target.closest("button");i.matches(".page-link--previous")?e(this,m,L).previousPage():i.matches(".page-link--next")&&e(this,m,L).nextPage(),this.scheduleRender()})}render(){return Maquette.h("nav",null,b(this,m,kt).call(this))}};m=new WeakSet,L=function(){return this.closest("pggm-table")},T=new WeakMap,kt=function(){return e(this,m,L)&&e(this,m,L).remote==="cursor"?Maquette.h("div",null,Maquette.h("button",{key:"cursor-previous-button",disabled:e(this,m,L).cursorData.prev?void 0:"disabled",class:"page-link page-link--previous",onclick:()=>e(this,m,L).remoteUrl=e(this,m,L).cursorData.prev,"aria-label":"Previous"},Maquette.h("span",{"aria-hidden":"true"},"\xAB")),Maquette.h("button",{key:"cursor-next-button",class:"page-link page-link--next",disabled:e(this,m,L).cursorData.next?void 0:"disabled",onclick:()=>e(this,m,L).remoteUrl=e(this,m,L).cursorData.next,"aria-label":"Next"},Maquette.h("span",{"aria-hidden":"true"},"\xBB"))):e(this,m,L)&&e(this,m,L).rowsPerPage&&e(this,m,L).totalPages>0?Maquette.h("nav",{"aria-label":x.LABEL_PAGING},Maquette.h("button",{key:"previous-button",disabled:e(this,m,L).currentPage===1?"disabled":!1,class:"page-link page-link--previous",onclick:e(this,T),"aria-label":"Previous"},Maquette.h("span",{"aria-hidden":"true"},"\xAB")),e(this,m,L).totalPages>1&&Maquette.h("span",null,e(this,m,L).currentPage,"/",e(this,m,L).totalPages),Maquette.h("button",{key:"next-button",class:"page-link page-link--next",onclick:e(this,T),"aria-label":"Next"},Maquette.h("span",{"aria-hidden":"true"},"\xBB"))):Maquette.h("div",null)},x.projectorMode="replace",x.TAG_NAME="pggm-table-paging",x.LABEL_PAGING="Paginering",x.style=At,x=o([CustomElementConfig({tagName:x.TAG_NAME})],x);var xt=`:host{display:none}:host([open]){display:block}.filter-popover[open]{background-color:var(--pggm-tooltip-background-color);border:0;border-radius:var(--pggm-tooltip-border-radius);-webkit-box-shadow:var(--pggm-tooltip-box-shadow);box-shadow:var(--pggm-tooltip-box-shadow);color:var(--pggm-tooltip-color);left:var(--_table-filter-left);margin:0;overflow-x:hidden;padding:var(--pggm-tooltip-padding-block-start) var(--pggm-tooltip-padding-inline-start) var(--pggm-tooltip-padding-block-end) var(--pggm-tooltip-padding-inline-end);top:var(--_table-filter-top)}.filter-popover-actions{gap:1em;gap:var(--pggm-data-table-filter-popover-gap,1em);margin-top:1em;margin-top:var(--pggm-data-table-filter-popover-actions-block-start,1em)}.filter-form,.filter-popover-actions{display:-webkit-box;display:-ms-flexbox;display:flex}.filter-form{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:.5em;gap:var(--pggm-data-table-filter-popover-gap,.5em)}.hidden{display:none}
`;var S,p,y,Y,D,St,W,$,k,j,Z,M,A=class extends CustomElement{constructor(){super(...arguments);u(this,y);u(this,S,null);u(this,p,null);this.fieldType="string";u(this,D,!1);u(this,W,()=>{e(this,S).setFilter(e(this,p)),this.hide()});u(this,$,()=>{e(this,S).setFilter(null),this.hide()});u(this,j,t=>{t.key==="Enter"?e(this,W).call(this):t.key==="Escape"&&this.hide()});u(this,Z,()=>{var t,r,i,n,d,h;return Maquette.h("div",{class:"filter-form filter-form-number",key:"number-popover"},Maquette.h("div",null,Maquette.h("select",{is:"pggm-select",onchange:C=>{e(this,p).type=C.target.value}},Maquette.h("option",{selected:e(this,p).type==="equals",value:"equals"},((t=e(this,y,k))==null?void 0:t.equalsLabel)||s.LABEL_EQUALS),Maquette.h("option",{selected:e(this,p).type==="greaterThan",value:"greaterThan"},((r=e(this,y,k))==null?void 0:r.greaterThanLabel)||s.LABEL_GREATER_THAN),Maquette.h("option",{selected:e(this,p).type==="greaterThanOrEqual",value:"greaterThanOrEqual"},((i=e(this,y,k))==null?void 0:i.greaterTanOrEqualsLabel)||s.LABEL_GREATER_THAN_OR_EQUAL),Maquette.h("option",{selected:e(this,p).type==="lessThan",value:"lessThan"},((n=e(this,y,k))==null?void 0:n.lessThanLabel)||s.LABEL_LESS_THAN),Maquette.h("option",{selected:e(this,p).type==="lessThanOrEqual",value:"lessThanOrEqual"},((d=e(this,y,k))==null?void 0:d.lessThanOrEqualsLabel)||s.LABEL_LESS_THAN_OR_EQUAL),Maquette.h("option",{selected:e(this,p).type==="between",value:"between"},((h=e(this,y,k))==null?void 0:h.betweenLabel)||s.LABEL_BETWEEN))),Maquette.h("div",null,Maquette.h("input",{key:"number-field",step:"any",type:"number",is:"pggm-input","aria-label":this.filterLabel,onchange:C=>{e(this,p).values[0]=C.target.value}})),Maquette.h("div",{classes:{hidden:e(this,p).type!=="between"}},Maquette.h("input",{key:"second-number-field",step:"any",type:"number",is:"pggm-input","aria-label":this.filterLabel,onchange:C=>{e(this,p).values[1]=C.target.value}})),Maquette.h("div",{class:"filter-popover-actions"},Maquette.h("button",{type:"button",is:"pggm-button",appearance:"primary",onclick:e(this,W)},this.filterLabel),Maquette.h("button",{type:"button",is:"pggm-button",appearance:"secondary",onclick:e(this,$)},this.clearLabel)))});u(this,M,()=>{var t,r,i,n,d;return Maquette.h("div",{class:"filter-form filter-form-string",key:"string-popover"},Maquette.h("select",{is:"pggm-select",onchange:h=>{e(this,p).type=h.target.value}},Maquette.h("option",{selected:e(this,p).type==="contains",value:"contains"},((t=e(this,y,k))==null?void 0:t.containsLabel)||s.LABEL_CONTAINS),Maquette.h("option",{selected:e(this,p).type==="equals",value:"equals"},((r=e(this,y,k))==null?void 0:r.equalsLabel)||s.LABEL_EQUALS),Maquette.h("option",{selected:e(this,p).type==="startsWith",value:"startsWith"},((i=e(this,y,k))==null?void 0:i.startsWithLabel)||s.LABEL_STARTS_WITH),Maquette.h("option",{selected:e(this,p).type==="endsWith",value:"endsWith"},((n=e(this,y,k))==null?void 0:n.endsWithLabel)||s.LABEL_ENDS_WITH)),Maquette.h("input",{type:"text",is:"pggm-input",id:"StringFilter","aria-label":this.filterLabel,onchange:h=>{e(this,p).value=h.target.value}}),Maquette.h("pggm-checkbox",{id:"caseSensitive",onchange:h=>{e(this,p).caseSensitive=h.target.checked}},((d=e(this,y,k))==null?void 0:d.caseSensitiveLabel)||s.LABEL_CASE_SENSITIVE),Maquette.h("div",{class:"filter-popover-actions"},Maquette.h("button",{type:"button",is:"pggm-button",appearance:"primary",onclick:e(this,W)},this.filterLabel),Maquette.h("button",{type:"button",is:"pggm-button",appearance:"secondary",onclick:e(this,$)},this.clearLabel)))})}show(t,r){if(e(this,y,Y)){this.hide();return}f(this,p,r),this.fieldType=t.type||"string",f(this,S,t),this.fieldType==="number"&&!e(this,p)?f(this,p,{name:"numberFilter",type:"equals",values:["",""]}):e(this,p)||f(this,p,{name:"stringFilter",type:"contains",value:"",caseSensitive:!1}),this.setAttribute("open",""),this.scheduleRender()}hide(){f(this,D,!1),this.style.opacity="0",this.removeAttribute("open"),f(this,S,null)}get filterLabel(){var t;return((t=e(this,y,k))==null?void 0:t.filterLabel)||s.LABEL_FILTER}get clearLabel(){var t;return((t=e(this,y,k))==null?void 0:t.clearLabel)||A.LABEL_CLEAR}render(){return Maquette.h("div",{class:"filter-popover",popover:"",open:e(this,y,Y),on:{toggle:t=>{t.newState==="closed"&&this.hide()}},afterUpdate:t=>{var r;e(this,y,Y)&&(this.style.opacity="0",t.showPopover(),requestAnimationFrame(()=>{b(this,y,St).call(this,t)}),(r=this.inputElement)==null||r.focus())}},this.fieldType==="string"&&e(this,M).call(this),this.fieldType==="number"&&e(this,Z).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",e(this,j))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",e(this,j))}};S=new WeakMap,p=new WeakMap,y=new WeakSet,Y=function(){return this.hasAttribute("open")},D=new WeakMap,St=function(t){if(e(this,D)||!t||!e(this,S))return;let r=e(this,S).getBoundingClientRect(),i=r.left+r.width-t.clientWidth;i<0&&(i=0),this.style.setProperty("--_table-filter-left",`${i}px`),this.style.setProperty("--_table-filter-top",`${r.top+e(this,S).offsetHeight}px`),this.style.opacity=null,this.inputElement&&this.fieldType==="string"?this.inputElement.value=e(this,p).value||"":this.fieldType==="number"&&Array.from(this.shadowRoot.querySelectorAll("input[type='number']")).forEach((d,h)=>{d.value=e(this,p).values[h]||""}),f(this,D,!0)},W=new WeakMap,$=new WeakMap,k=function(){var t;return((t=e(this,S))==null?void 0:t.closest(s.TAG_NAME))||null},j=new WeakMap,Z=new WeakMap,M=new WeakMap,A.TAG_NAME="pggm-table-filter",A.LABEL_CLEAR="Wis",A.style=xt,o([Query("div.filter-popover")],A.prototype,"popoverElement",2),o([Query("input#StringFilter")],A.prototype,"inputElement",2),o([Property({type:"string"})],A.prototype,"fieldType",2),A=o([CustomElementConfig({tagName:A.TAG_NAME})],A);var B,z,K,U,c,wt,Nt,I,Q,w,R,N,O,Ft,Ct,Rt,Bt,Ht,qt,It,Dt,G,P,Wt,s=class extends CustomElement{constructor(){super();u(this,c);u(this,B);u(this,z);u(this,K,null);u(this,U);this.filters=new Map;u(this,I,[]);this.selected=[];this.remote=null;this.remoteUrl=null;this.data=[];this.selectable=!1;this.selectType="multiple";this.actions=!1;this.sortLabel=s.LABEL_SORT;this.clearLabel=s.LABEL_CLEAR;this.filterLabel=s.LABEL_FILTER;this.greaterThanLabel=s.LABEL_GREATER_THAN;this.greaterTanOrEqualsLabel=s.LABEL_GREATER_THAN_OR_EQUAL;this.lessThanLabel=s.LABEL_LESS_THAN;this.lessThanOrEqualsLabel=s.LABEL_LESS_THAN_OR_EQUAL;this.betweenLabel=s.LABEL_BETWEEN;this.equalsLabel=s.LABEL_EQUALS;this.containsLabel=s.LABEL_CONTAINS;this.endsWithLabel=s.LABEL_ENDS_WITH;this.startsWithLabel=s.LABEL_STARTS_WITH;this.caseSensitiveLabel=s.LABEL_CASE_SENSITIVE;u(this,w,1);u(this,R);u(this,N,"asc");u(this,G,t=>{t.preventDefault();let i=t.target.closest("tr").dataset.id;this.selected&&this.selected.includes(i)?this.selected=this.selected.filter(n=>n!==i):(this.selected=this.selected||[],this.selected.push(i))});b(this,c,wt).call(this),f(this,K,Maquette.dom.create(Maquette.h("slot",{name:"footer"})).domNode)}get cursorData(){if(!e(this,U))return{prev:void 0,next:void 0};let{prev:t,next:r}=e(this,U);return{prev:t,next:r}}getFormatter(t){if(!s.formatters.has(t)){if(t&&t.indexOf("-")>-1&&e(this,I).indexOf(t)===-1){let r=customElements.get(t);if(r)return s.formatters.set(t,(i,n)=>r.format(i,n)),s.formatters.get(t);e(this,I).push(t),customElements.whenDefined(t).then(()=>{let i=customElements.get(t);i&&(s.formatters.set(t,(n,d)=>i.format(n,d)),f(this,I,e(this,I).filter(n=>n!==t)),this.scheduleRender())})}return(r,i)=>i[r]}return s.formatters.get(t)||((r,i)=>i[r])}get fields(){return e(this,c,Q).map(t=>t.field)}get currentSortField(){return e(this,R)}get currentSortDirection(){return e(this,N)}get currentPage(){return e(this,w)}nextPage(){e(this,w)<this.totalPages&&(et(this,w)._++,this.scheduleRender())}previousPage(){e(this,w)>1&&(et(this,w)._--,this.scheduleRender())}get totalPages(){if(!this.data||this.data.length===0)return 0;let t=this.data.length,r=Math.ceil(t/this.rowsPerPage);return r>0?r:1}sort(t){if(e(this,R)===t.field?f(this,N,e(this,N)==="asc"?"desc":"asc"):f(this,N,"asc"),f(this,w,1),f(this,R,t.field),e(this,B)==="cursor"){let r=new URL(this.remoteUrl,window.location.href);r.searchParams.set("sort",t.field),r.searchParams.set("order",e(this,N)),r.searchParams.delete("cursor"),this.remoteUrl=r.toString();return}this.scheduleRender()}openFilterPopover(t){let r=this.getRootNode();if(r instanceof ShadowRoot||r instanceof Document){let i=r.querySelector("pggm-table-filter");i||(i=document.createElement(A.TAG_NAME),r instanceof Document?r.body.appendChild(i):r.appendChild(i)),i.show(t,this.filters.get(t.field))}}setFilter(t,r){var n;r?this.filters.set(t,r):this.filters.delete(t),this.scheduleRender(),((n=this.slotElement)==null?void 0:n.assignedElements().filter(d=>d instanceof g)).forEach(d=>{d instanceof g&&d.scheduleRender()})}updateSelectAll(t){t?this.selected=Array.from(this.shadowRoot.querySelectorAll("tbody tr")).map(r=>r.dataset.id):this.selected=[],b(this,c,P).call(this)}get isMultipleSelect(){return this.selectable&&this.selectType==="multiple"}render(){let t=this.querySelectorAll(g.TAG_NAME);return Maquette.h("div",{class:"table-container"},Maquette.h("table",null,Maquette.h("thead",null,Maquette.h("tr",null,Maquette.h("slot",{id:"MainSlot",afterCreate:r=>{r.addEventListener("slotchange",()=>{this.scheduleRender()}),this.scheduleRender()}}))),Maquette.h("tbody",null,e(this,c,Ct).map((r,i)=>{let n=r["."],d={};return this.selectable&&!this.isMultipleSelect&&(d.tabindex="0",d.onclick=h=>{this.selected=[n],b(this,c,P).call(this)},d.onkeydown=h=>{(h.key==="Enter"||h.key===" ")&&(this.selected=[n],b(this,c,P).call(this),h.preventDefault())}),Maquette.h("tr",ct(at({},d),{key:`tr-${i}-${n}`,"data-id":n?n.toString():"",classes:{even:i%2===0,odd:i%2!==0,selected:this.selected.includes(n)}}),Array.from(t).map((h,C)=>{var rt;let F=h.getAttribute("field"),H=h.getAttribute("format"),q=F?r[F]:null;if(q)if(H&&H.indexOf("-")>-1&&this.idField){let it=this.data.find(Ot=>Ot[this.idField]===n);q=this.getFormatter(H)(F,it||r)}else q=this.getFormatter(H)(F,r);let V=n||r[h.field];return Maquette.h("td",{key:`td-${F}-${i}-${e(this,w)}-${e(this,N)}`,styles:{"text-align":b(this,c,Dt).call(this,F)},hidden:h.hidden},this.isMultipleSelect&&C===0?Maquette.h("label",{for:`Checkbox-${V}`,onclick:e(this,G)},Maquette.h("pggm-checkbox",{id:`Checkbox-${V}`,class:"select-row",type:"checkbox",checked:(rt=this.selected)==null?void 0:rt.includes(V+""),name:V+"","data-field-id":V+""}),q):b(this,c,Wt).call(this,q))}))}))))}updated(t,r,i){(t==="remote"||t==="remoteUrl")&&b(this,c,Nt).call(this)}connectedCallback(){var t;super.connectedCallback(),(t=this.shadowRoot)!=null&&t.querySelector("slot[name=footer]")||this.shadowRoot.appendChild(e(this,K)),this.addEventListener("fieldChanged",r=>{this.scheduleRender()})}};B=new WeakMap,z=new WeakMap,K=new WeakMap,U=new WeakMap,c=new WeakSet,wt=function(){s.formatters.set("date",(t,r)=>{let i=r[t];return i instanceof Date?i.toLocaleDateString(e(this,c,O)):i}),s.formatters.set("datetime",(t,r)=>{let i=r[t];return i instanceof Date?`${i.toLocaleDateString(e(this,c,O))} ${i.toLocaleTimeString(e(this,c,O))}`:i}),s.formatters.set("number",(t,r)=>{let i=r[t];return typeof i=="number"?new Intl.NumberFormat(e(this,c,O)).format(i):i}),s.formatters.set("currency",(t,r)=>{let i=r[t];return typeof i=="number"?new Intl.NumberFormat(e(this,c,O),{style:"currency",currency:"EUR"}).format(i):i}),s.formatters.set("string",(t,r)=>{let i=r[t];return typeof i=="string"?i:i.toString()})},Nt=function(){requestAnimationFrame(()=>{let t=!1;e(this,B)!==this.remote&&f(this,B,this.remote),e(this,z)!==this.remoteUrl&&(f(this,z,this.remoteUrl),t=!0),this.remote&&this.remoteUrl&&t&&fetch(this.remoteUrl).then(r=>r.json()).then(r=>{f(this,U,r),e(this,B)==="cursor"?this.data=r.items:e(this,B)==="simple"&&(this.data=r)}).catch(r=>{console.error("Error fetching remote data:",r)}).finally(()=>{var r;(r=this.querySelector("pggm-table-paging"))==null||r.scheduleRender(),this.scheduleRender()})})},I=new WeakMap,Q=function(){var r;let t=(r=this.slotElement)==null?void 0:r.assignedElements();return t?t.filter(i=>i instanceof g).map(i=>({field:i.field,format:i.format,type:i.type,hidden:i.hidden})):[]},w=new WeakMap,R=new WeakMap,N=new WeakMap,O=function(){var t;return this.getAttribute("lang")||((t=this.closest("[lang]"))==null?void 0:t.getAttribute("lang"))||document.documentElement.lang||"nl"},Ft=function(t){t.forEach(r=>{e(this,c,Q).forEach(i=>{let n=r[i.field];i.type==="date"&&n&&typeof n=="string"&&(r[i.field]=new Date(n))})})},Ct=function(){if(!this.data)return[];let t=this.data.map(n=>{let d={};return e(this,c,Q).forEach(h=>{let F=h.field.split(".").reduce((H,q)=>H?H[q]:void 0,n);d[h.field]=F}),this.idField&&(d["."]=n[this.idField]),d});b(this,c,Ft).call(this,t);let r=b(this,c,Bt).call(this,t),i=b(this,c,It).call(this,r);return b(this,c,Rt).call(this,i)},Rt=function(t){if(!t)return[];if(this.rowsPerPage<=0||this.rowsPerPage===void 0)return t;let r=(e(this,w)-1)*this.rowsPerPage,i=r+this.rowsPerPage;return t.slice(r,i)},Bt=function(t){let r=t||[];return this.filters.forEach((i,n)=>{r=r.filter(d=>{let h=d[n],C=e(this,c,Q).find(F=>F.field===n).type;return!i||!h?!0:i.name==="stringFilter"?b(this,c,Ht).call(this,i,h):i.name==="numberFilter"?b(this,c,qt).call(this,i,h):!0})}),r},Ht=function(t,r){if(typeof r!="string")return!1;if(t.caseSensitive){let i=t.value;switch(t.type){case"contains":return r.includes(i);case"startsWith":return r.startsWith(i);case"endsWith":return r.endsWith(i);case"equals":return r===i;default:return!0}}else{let i=t.value.toLowerCase();switch(t.type){case"contains":return r.toLowerCase().includes(i);case"startsWith":return r.toLowerCase().startsWith(i);case"endsWith":return r.toLowerCase().endsWith(i);case"equals":return r.toLowerCase()==i;default:return!0}}},qt=function(t,r){if(typeof r!="number")return!1;let i=t.values?t.values[0]:null,n=i!==null?parseFloat(i):null;if(isNaN(n))return!0;switch(t.type){case"greaterThan":return r>n;case"greaterThanOrEqual":return r>=n;case"lessThan":return r<n;case"lessThanOrEqual":return r<=n;case"between":if(!t.values||t.values.length!==2)return!0;let d=t.values?t.values[1]:null,h=d!==null?parseFloat(d):null;return isNaN(h)?!0:r>=n&&r<=h;case"equals":return r===n;default:return!0}},It=function(t){if(!t)return[];if(!e(this,R))return t;let r=[...t];return r.sort((i,n)=>{let d=i[e(this,R)],h=n[e(this,R)];return d<h?e(this,N)==="asc"?-1:1:d>h?e(this,N)==="asc"?1:-1:0}),r},Dt=function(t){var n;let r=(n=this.slotElement)==null?void 0:n.assignedElements();if(!r)return"left";let i=r.find(d=>d instanceof g&&d.field===t);return i instanceof g?i.textAlign:"left"},G=new WeakMap,P=function(){requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("selectionChange",{detail:{selectedRows:this.selected},bubbles:!0,composed:!0}))})},Wt=function(t){return t instanceof HTMLElement?Maquette.h("div",{afterCreate:r=>{console.log(r.replaceWith(t))}},"!!"):t},s.projectorMode="replace",s.TAG_NAME="pggm-table",s.LABEL_FILTER="Filter",s.LABEL_SORT="Sorteren",s.LABEL_GREATER_THAN="Groter dan",s.LABEL_LESS_THAN="Kleiner dan",s.LABEL_BETWEEN="Tussen",s.LABEL_EQUALS="Gelijk aan",s.LABEL_CONTAINS="Bevat",s.LABEL_ENDS_WITH="Eindigt op",s.LABEL_STARTS_WITH="Begint met",s.LABEL_LESS_THAN_OR_EQUAL="Kleiner dan of gelijk aan",s.LABEL_GREATER_THAN_OR_EQUAL="Groter dan of gelijk aan",s.LABEL_CLEAR="Wissen",s.LABEL_CASE_SENSITIVE="Hoofdlettergevoelig",s.style=dt,s.formatters=new Map,o([Query("#MainSlot")],s.prototype,"slotElement",2),o([Property({type:"object"})],s.prototype,"selected",2),o([Property({type:"string",attribute:"remote",reflect:!0})],s.prototype,"remote",2),o([Property({type:"string",attribute:"remote-url"})],s.prototype,"remoteUrl",2),o([Property({type:"object",attribute:"data"})],s.prototype,"data",2),o([Property({type:"boolean",attribute:"selectable"})],s.prototype,"selectable",2),o([Property({type:"string",attribute:"select-type"})],s.prototype,"selectType",2),o([Property({type:"boolean",attribute:"actions"})],s.prototype,"actions",2),o([Property({type:"string",attribute:"sort-label"})],s.prototype,"sortLabel",2),o([Property({type:"string",attribute:"clear-label"})],s.prototype,"clearLabel",2),o([Property({type:"string",attribute:"filter-label"})],s.prototype,"filterLabel",2),o([Property({type:"string",attribute:"greater-then-label"})],s.prototype,"greaterThanLabel",2),o([Property({type:"string",attribute:"greater-than-or-equals-label"})],s.prototype,"greaterTanOrEqualsLabel",2),o([Property({type:"string",attribute:"less-then-label"})],s.prototype,"lessThanLabel",2),o([Property({type:"string",attribute:"less-than-or-equals-label"})],s.prototype,"lessThanOrEqualsLabel",2),o([Property({type:"string",attribute:"between-label"})],s.prototype,"betweenLabel",2),o([Property({type:"string",attribute:"equals-label"})],s.prototype,"equalsLabel",2),o([Property({type:"string",attribute:"contains-label"})],s.prototype,"containsLabel",2),o([Property({type:"string",attribute:"ends-withh-label"})],s.prototype,"endsWithLabel",2),o([Property({type:"string",attribute:"starts-with-label"})],s.prototype,"startsWithLabel",2),o([Property({type:"boolean",attribute:"case-sensitive-label"})],s.prototype,"caseSensitiveLabel",2),o([Property({type:"number",attribute:"rows-per-page"})],s.prototype,"rowsPerPage",2),o([Property({type:"string",attribute:"id-field"})],s.prototype,"idField",2),s=o([CustomElementConfig({tagName:s.TAG_NAME})],s);export{s as PGGMTable};
