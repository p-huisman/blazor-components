@inherits PggmComponentBase
@namespace Pggm.Components

<pggm-toggletip @ref="ElementRef" @attributes="GetAttributes()">
  @ChildContent
</pggm-toggletip>

@code {
  public override string TagName => "pggm-toggletip";

  /// <summary>
  /// The ID of the element that triggers this toggletip
  /// </summary>
  [Parameter, EditorRequired] public string For { get; set; } = string.Empty;

  /// <summary>
  /// The unique identifier for this toggletip
  /// </summary>
  [Parameter] public string? Id { get; set; }

  /// <summary>
  /// The position where the toggletip should appear relative to the trigger element
  /// </summary>
  [Parameter] public string? Position { get; set; }

  protected override void AddComponentAttributes(Dictionary<string, object> attributes)
  {
    // The 'for' attribute is required and links the toggletip to its trigger element
    AttributeHelper.SetAttributeIfNotEmpty(attributes, "for", For);
    
    // Set the ID for the toggletip - this should match the aria-describedby of the trigger
    AttributeHelper.SetAttributeIfNotEmpty(attributes, "id", Id);
    
    // Optional position attribute
    AttributeHelper.SetAttributeIfNotEmpty(attributes, "position", Position);
  }
}